\chapter{Argomenti correlati}

\section{Statistiche}

Le tecniche descritte in \ref{quantificazione-della-privacy} sono state utilizzate dai ricercatori Dorit Ron e Adi Shamir del Weizmann Institute of Science di Israele per condurre alcune analisi statistiche sulla rete delle transazioni Bitcoin dalla prima transazione del 3 Gennaio 2009 al 13 Maggio 2012. I risultati da loro trovati verranno qui esposti in forma sintetica sotto forma di punti solo come nota informativa di alcune proprietà della rete, in quanto la trattazione è ormai vecchia di quasi 2 anni, durante i quali il mondo Bitcoin si è espanso esponenzialmente, minando la corrispondenza di tali statistiche con l'attuale realtà. I risultati completi sono disponibili in \cite{transazioni}. Statistiche aggiornate sono invece disponibili in tempo reale presso \cite{blockchain-info}.\\

Prima di esporre i risultati è importante specificare alcune osservazioni fatte dagli stessi osservatori. Come descritto in \ref{quantificazione-della-privacy}, il grafo delle transazioni viene chiamato \emph{grafo degli indirizzi} mentre il grafo derivato dall'unificazione degli indirizzi prende il nome di \emph{grafo delle entità}, il quale è per forza di cose un risultato approssimato e potrebbe essere vittima di due stime errate. È possibile infatti che si sia verificata una sottostima nell'assegnazione di un indirizzo ad una entità nel caso in cui non ci siano abbastanza dati (transazioni) per associare tale indirizzo ad una entità, ma è anche possibile sovrastimare il numero di entità nel caso in cui molti utenti abbiano deciso di unificare le loro attività in una unica transazione a cui ciascuno di essi contribuisce con il proprio indirizzo. Avendone parlato con gli stessi sviluppatori Bitcoin, i ricercatori hanno stabilito che gli errori di sovrastima sono estremamente ridotti, ma potrebbero essere stati commessi alcune sottostime, come già rilevato in \ref{quantificazione-della-privacy}.\\

I risultati più rilevanti della trattazione sono i seguenti:
\begin{itemize}
    \item I dati analizzati contano 3730218 indirizzi distinti, dei quali 609270 compaiono solo come destinatari di transazioni.
    \item I 3120948 indirizzi che inviano BTC sono stati aggregati in 1851544 entità distinte, che unite agli indirizzi unicamente destinatari, porta il totale delle entità a 2460814.
    \item Esiste una varianza notevole nelle statistiche a causa di una sola entità che possiede 156722 indirizzi. L'entità in questione è l'exchange Mt. Gox, responsabile all'epoca di circa il 90\% del totale degli acquisti di BTC.
    \item Dato che il bilancio medio di un indirizzo è di 2.4 BTC, e quello di una entità è 3.7 BTC, a causa degli errori sopra descritti si stima che il bilancio medio di un utente sia superiore alle 3.7 BTC.
    \item All'epoca dell'analisi esistevano 9000050 BTC, generati dai 180001 blocchi analizzati, ma sommando i bilanci degli indirizzi che hanno solo ricevuto BTC si vede che essi contengono 7019100 BTC, ovvero il 78\% del totale.
      \begin{itemize}
          \item Di queste, il 76.5\% (il 59.7\% del totale) sono \emph{vecchie BTC}, nel senso che sono state ricevute più di tre mesi prima del 13 Maggio 2012 e che non sono mai state spese fino a tale data.
          \item Alcune di queste monete potrebbero essere smarrite o abbandonate da utenti che muovevano i loro primi passi nel mondo ancora acerbo di Bitcoin, e non per forza BTC accumulate per avidità.
          \item Per precauzione Dorit e Adi hanno deciso di ignorare tutte le transazioni precedenti il 18 Luglio 2010, data di apertura di Mt. Gox, portando il numero di monete \emph{sparite} dalla rete a 1657480.
          \item Ripetendo i calcoli, il 73\% di tutte le BTC rimanenti è depositato in indirizzi dormienti, e il 70\% di tali indirizzi (il 51\% del totale) risultano vecchie.
      \end{itemize}
    \item Calcolando in base agli indirizzi invece che in base alle transazioni, risulta che il 55\% di tutte le BTC è dormiente, dato non affetto da eventuali errori di stima precedentemente descritti.
    \item Il numero totale di BTC coinvolte in transazioni fino al 13 Maggio 2012 è di 423287950 (mining escluso).
    \item Il 52\% delle entità (59\% degli indirizzi) hanno ricevuto meno di 10 BTC, e l'88\% delle entità (91\% degli indirizzi) meno di 100 BTC.
    \item 76 entità (129 indirizzi) hanno ricevuto tra le 400000 e le 800000 BTC e solo quattro entità (un indirizzo) hanno ricevuto più di 800000 BTC.
    \item Al 13 Maggio 2012 il bilancio del 97\% (98\%) di tutte le entità (indirizzi) è minore di 10 BTC. I valori cambiano a 88\% (91\%) se si considera il valore massimale mai raggiunto durante l'intera vita dell'entità (indirizzo).
    \item Solo 78 entità e 70 indirizzi hanno un bilancio finale maggiore di 10000 BTC. I numeri aumentano a 3812 entità e 3876 indirizzi se si osserva il bilancio massimale.
    \item Il 97\% (98\%) delle entità (indirizzi) hanno meno di 10 transazioni a testa, mentre 75 entità e 80 indirizzi ne hanno almeno 5000.
    \item La maggior parte delle transazioni sono piccole:
      \begin{itemize}
          \item Il 28\% delle transazioni nel grafo delle entità (47\% in quello degli indirizzi) muove meno di 0.1 BTC.
          \item Il 73\% delle transazioni nel grafo delle entità (84\% in quello degli indirizzi) muove meno di 10 BTC.
          \item Esistono solo 364 transazioni nel grafo delle entità (340 in quello degli indirizzi) che muovono più di 50000 BTC.
      \end{itemize}
    \item Mt. Gox possiede il maggior numero di indirizzi (156722) ma non il maggior numero di transazioni (477526).
    \item Una entità non meglio identificata che possede il secondo maggior numero di indirizzi (il 50\% di quelli di Mt. Gox, ovvero 246012) ha ricevuto il 31\% in più di BTC rispetto a Mt. Gox (2886650 contro 2206170).
    \item La pool Deepbit ha generato il 70\% di transazioni in più rispetto a Mt. Gox (814044 in totale), pur possendo solo due indirizzi.
\end{itemize}

Un fatto interessante riguarda le transazioni con più di 50000 BTC. Esse sono esattamente 364, la prima delle quali datata 8 Novembre 2010 e valente 90000 BTC. Tracciando il flusso delle altre 363, i ricercatori si sono resi conto che 348 sono in realtà successori della prima grande transazione di Novembre. Il grafo che descrive tale transazione mostra catene di transazioni molto lunghe, suddivisione e riunificazioni di BTC e self-loop, tutti descritti nel dettaglio in \cite{transazioni} e molto probabilmente effettuati nel tentativo (evidentemente infruttuoso) di mascherare la destinazione e la provenienza del denaro.

\section{Deflazione}\label{deflazione}

Come si è detto, Bitcoin è un sistema monetario privo di inflazione, in quanto nessuna entità centrale può emettere moneta.
Esiste però una elevatissima propensione alla deflazione\footnote{Diminuzione generale del livello dei prezzi.} la quale potrebbe avere serie conseguenze per la sicurezza dell'intera rete.
Dato il loro estremo valore in rapporto alle monete circolanti, le BTC tendono ad essere accumulate invece che spese sparendo quindi dal sistema dal punto di vista economico. Stessa fine fanno le monete per le quali è stata persa la chiave privata che permetteva loro di essere spese.
Mano a mano che le BTC spariscono dalla circolazione (per volontà o incidente), diminuisce il volume delle transazioni, quindi anche il numero di blocchi generati nell'unità di tempo e di conseguenza il numero di nuove monete introdotte in circolazione, il quale viene già dimezzato ad intervalli programmati in modo da generare in assoluto al massimo 21 milioni di BTC.
L'attrattiva della creazione di nuovi blocchi diventa quindi via via sempre più ridotta, in quanto non solo ci saranno meno BTC generate, ma anche meno tasse da parte degli utenti a causa delle minori transazioni.
Se la circolazione di BTC si riduce troppo, potrebbe verificarsi una perdita di interesse nel sistema, il che si traduce in un numero sempre minore di miners e quindi di ``verificatori'' per le transazioni, fino al punto in cui il sistema è diventato troppo debole per potersi difendere da fork nella blockchain o altri attacchi.\\
Purtroppo non esistono contromisure pratiche per il rischio di deflazione, e l'unico modo per rendere Bitcoin resistente a tale pericolo consiste nel rendere consapevoli gli utenti ed in particolare i minatori di quanto importante sia il loro contributo per la salvaguardia del loro stesso denaro.\\
Si può però imparare da Bitcoin per una futura moneta elettronica che sia resistente alla deflazione integrando un sistema di feedback per controllare il tasso di mining globale, in modo che rifornire il sistema nel caso la circolazione diminuisca.

\section{Esempi reali ???titolo da cambiare}

\subsection{Distributore automatico}\label{distributore-automatico}

Sfruttando e ampliando i risultati espressi in \ref{double-spending} è stato realizzato il primo prototipo di distributore automatico resistente agli attacchi doppia-spesa in grado di erogare il servizio in meno di 10 secondi accettando Bitcoin in pagamento.  Tale lavoro è stato compiuto da alcuni ricercatori dell'ETH di Zurigo (tra cui il già citato Christian Decker, tra gli autori di \cite{bitcoinpropagation}) e da Roger Wattenhofer della divisione ricerca di Microsoft (visto anche lui in \cite{bitcoinpropagation}) e descritto nella loro recente pubblicazione \cite{bitcoinsnack}. \\

\subsubsection{Analisi preliminare}\label{doublespending-prevention-snack}

L'ampliamento dei risultati è stato realizzato implementando un attaccante ed un mercante come due sistemi completamente automatici in cui l'attaccante genera due transazioni conflittuali con gli stessi input e diverso output che vengono inviate a due nodi aiutanti collegati ad un numero casuale di nodi nella rete per meglio propagare le transazioni.\\
Il mercante invece segue i consigli descritti in \ref{prevenzione-doppia-spesa} collegandosi ad un grande numero di nodi monitorando gli annunci di transazioni da essi provenienti, ma non inoltra nessuna transazione per evitare di rimanere isolato. Il log degli annunci viene utilizzato ai fini dell'analisi prendendo un campione causale dei nodi connessi per simulare molteplici configurazioni come se fossero state realmente implementate\footnote{L'osservazione si è infatti svolta sulla rete reali, con solo mercante ed attaccante implementati ad-hoc, e questa accortezza di sfruttare unicamente il log per simulare varie configurazioni ha il beneficio di non intasare la rete con troppe transazioni fasulle invalidando future statistiche.}\\\\
L'esperimento ha contato 1922 tentativi di doppia spesa con il commerciante connesso ad una media di 1024 nodi. Un primo risultato si ha nel rapporto tra le transazioni legittime e quelle illegittime osservate dal commerciante: anche tali transazioni in conflitto venivano rilasciate in rete in modo simultaneo, il rapporto osservato tra esse non è stato del 50\%, bensì mediamente del 31.78\% a causa del rallentamento che una transazione subisce mano a mano che l'altra viene propagata. Più interessante è il fatto che non tutti i nodi monitorati hanno inoltrato nessuna delle due transazioni: una media del 26.09\% dei nodi non ha annunciato nessuna delle due transazioni coinvolte nell'attacco. Tali nodi probabilmente non erano aggiornati con l'attuale stato della blockchain per cui, non potendo essere certi che le transazioni che ricevono durante l'aggiornamento sono state o meno già incluse in un nodo, "hanno scelto" di non inoltrarle nella rete per evitare traffico potenzialmente superfluo.\\
Ma il fulcro dell'analisi riguardava le configurazioni dei nodi a cui si connetteva il mercante: per ogni sottoinsieme casuale di nodi la simulazione è stata ripetuta 1000 volte risultando in 192200000 diverse analisi. Il risultato è che la probabilità per il commerciante di notare un tentativo di doppia-spesa (ovvero la probabilità per il commerciante di ricevere entrambe le transazioni in conflitto) raggiunge un valore ottimale a partire dai 100 nodi connessi: solo lo 0.77\% dei tentati attacchi è passato inosservato.\\
Dato che non tutti i nodi propagano transazioni è necessario impostare un tempo massimo scaduto il quale la transazione viene considerata valida e il servizio erogato. Tale soglia aumenta il rischio di subire l'attacco in quanto riduce la finestra temporale di monitoraggio. I risultati sperimentali confermano però che la probabilità di non vedere entrambe le transazioni decresce esponenzialmente con il numero degli annunci: il 99 percentile per l'identificazione di un attacco doppia-spesa si ha intorno ai 37 annunci. Similmente, il tempo necessario per individuare l'attacco diminuisce con l'aumentare del numero di nodi connessi, con il 99 percentile intorno ai 6.29 secondi per 100 nodi. Con tali risultati si può quindi dire che una transazione può essere accettata con sicurezza dopo 6.29 secondi e 37 annunci di tale transazione oppure quando viene inclusa in un blocco, quale dei due eventi si verifica per primo.\\
Con tale configurazione la probabilità di successo di un attaccante scende al valore assolutamente accettabile di 0.088\%, il che vuol dire che un commerciante che implementi quanto sopra descritto deve aspettarsi la perdita di un incasso ogni mille.

\subsubsection{Implementazione}

I risultati della sperimentazione sono stati utilizzati per costruire un prototipo di distributore automatico funzionante a Bitcoin e resistente agli attacchi doppia-spesa.
L'implementazione è divisa in due parti: un server per la verifica e il distributore. Il server ha il compito di connettersi alla rete Bitcoin e di gestire il portafogli della compagnia proprietaria del distributore, e pertanto può potenzialmente gestire in modo simultaneo un elevato numero di distributori. La macchina invece sfrutta il sistemo operativo Android per connettersi al server tramite rete mobile e un'app dedicata per interfacciarsi con l'utente.\\
Quando il cliente seleziona un prodotto, il distributore contatta il server che risponde con un indirizzo creato appositamente\footnote{Questo permette di tracciare le transazioni con più facilità e rende potenzialmente più difficile identificare il server come detentore del portafogli e quindi come appetitoso bersaglio per attacchi.} a cui l'utente deve inviare il pagamento e rimane in ascolto per identificare transazioni in ingresso a tale indirizzo. Tale informazione insieme all'ammontare da pagare viene presentato all'utente sotto forma di codice QR\footnote{Tali codici QR rappresentano infatti un URI che contiene informazioni quali indirizzo del destinatario, ammontare del pagamento ed un eventuale messaggio. Sono molto diffusi per la facilità con cui permettono di sfruttare le app Bitcoin sui moderni smartphone.} che viene scansionato dall'utente con una apposita app Bitcoin (esistono infatti diversi client Bitcoin per smartphone) e sfruttato per generare la transazione di pagamento. Una volta che il server riceve il primo annuncio di tale transazione attiva il decadimento della sua soglia di verifica basata sul numero di nodi che l'hanno ricevuta ed inoltrata. Appena viene raggiunto il numero richiesto oppure se la transazione viene inclusa in un blocco prima di tale evento, il sevizio viene erogato. Con una soglia di 40 nodi in media si può fornire il servizio richiesto in meno di 10 secondi.\\
Durante il suo periodo di operatività la macchina ha funzionato alla perfezione e nessuno degli attacchi di doppia-spesa tentato nei suoi confronti ha avuto successo. Tale confortante risultato ha spinto la compagnia distributrice ad avviare un test su larga scala in Svizzera che verificherà definitivamente la bontà di tale implementazione.

\subsection{Bancomat}

\subsection{Silkroad ??FORSE???}
