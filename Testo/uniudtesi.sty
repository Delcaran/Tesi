\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{uniudtesi}[2013/02/27  Redefines maketitle for University of Udine Thesis, and sets a binding offset of 1cm; written by Gianluca Gorni]
\RequirePackage{ifthen}
\RequirePackage{graphicx}
\RequirePackage{hyperref}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Per allontanare la parte stampata %
% dal margine della rilegatura:     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage[bindingoffset=1cm]{geometry}
%\usepackage[bindingoffset=1cm, top=3cm, bottom=2cm, left=2cm, right=2cm]{geometry}
%\titlespacing*{\chapter}{0pt}{-50pt}{20pt}
%\titleformat{\chapter}[display]{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{minitoc} % crea dei mini-indici nei capitoli nel caso di numerose sezioni
\usepackage[bottom]{footmisc} % forzo le note in fondo alle pagine
\usepackage{acronym} % \crea un elenco degli acronimi con link ipertestuali e definizioni
\usepackage{varioref} % \vref e \eqref indicano da soli la pagina dei riferimenti se serve
\usepackage[italian,english]{babel}
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{latexsym}
\usepackage{makeidx}
\usepackage{cite}
\usepackage{titlesec}
%\usepackage{epstopdf}
\usepackage[fixlanguage]{babelbib}
\usepackage{fancyhdr}

\newcommand{\fncyblank}{\fancyhf{}}
\newenvironment{abstract}%
{\cleardoublepage\fncyblank\null \vfill\begin{center}%
\bfseries \abstractname \end{center}}%
	{\vfill\null}

% tolgo le impaginazioni in caso di pagina vuota
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside
\ifodd\c@page
\else\hbox{}\thispagestyle{empty}\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

% Col pacchetto tocbibind compariranno nell'indice anche
% la bibliografia ed eventualmente l'indice analitico
\usepackage[nottoc]{tocbibind}

% Il pacchetto indentfirst abolisce la fastidiosa convenzione
% anglosassone di fa cominciare la prima riga di un
% capitolo o sezione a margine sinistro, senza rientro:
\usepackage{indentfirst}

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %          Numerazione delle formule                  %
  % Se non specificato altrimenti, il LaTeX numera le   %
  % formule come (capitolo.formula) (per esempio (2.5)  %
  % e` la quinta formula del secondo capitolo).         %
  % Con le istruzioni seguenti invece la numerazione    %
  % diventa (capitolo.sezione.formula) (per esempio     %
  % (3.2.6) e` la sesta formula della seconda sezione   %
  % del terzo capitolo):                                %
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\makeatletter
%\@addtoreset{equation}{section}
%\makeatother
%\renewcommand{\theequation}%
%  {\thesection.\arabic{equation}}

\hypersetup{pdfpagelayout=SinglePage,
pdfpagemode=UseOutlines,
bookmarksopen,
bookmarksopenlevel=2,
pdftitle=BitCoin,
pdfauthor=Paoluzzi Matteo,
pdfsubject=Moneta Elettronica Peer-to-Peer,
pdfkeywords=p2p bitcoin}

\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{}
\fancyhead[LE,RO]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\rightmark}
\fancyhead[RE]{\bfseries\leftmark}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\headheight}{13pt}

\fancypagestyle{plain}{ %
  \fancyhf{} % remove everything
  \renewcommand{\headrulewidth}{0pt} % remove lines as well
  \renewcommand{\footrulewidth}{0pt}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Con le dichiarazioni seguenti                           %
% teoremi, definizioni, proposizioni, lemmi e corollari   %
% vengono numerati capitolo per capitolo e con un         %
% contatore unico per tutti (per esempio, se subito dopo  %
% il Teorema 2.1 c'e' una definizione, questa sara'       %
% Definizione 2.2)                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\theoremstyle{plain}
\newtheorem{teorema}{Teorema}[chapter]
\newtheorem{proposizione}[teorema]{Proposizione}
\newtheorem{lemma}[teorema]{Lemma}
\newtheorem{corollario}[teorema]{Corollario}

\theoremstyle{definition}
\newtheorem{definizione}[teorema]{Definizione}
\newtheorem{esempio}[teorema]{Esempio}

\theoremstyle{remark}
\newtheorem{osservazione}[teorema]{Osservazione}

\newcommand{\@facolta}{?}
\newcommand{\@dipartimento}{Matematica e Informatica}
\newcommand{\@corsodilaurea}{?}
\newcommand{\@corsodilaureatriennale}{?}
\newcommand{\@corsodilaureaspecialistica}{?}
\newcommand{\@triennaleOspecialisticaOmagistrale}{?}
\newcommand{\@titolo}{Senza Titolo}
\newcommand{\@sottotitolo}{?}
\newcommand{\@annoaccademico}{?}
\newcommand{\@relatore}{?}
\newcommand{\@correlatore}{?}
\newcommand{\@correlatoreDue}{?}
\newcommand{\@laureando}{?}
\newcommand{\@laureanda}{?}
\newcommand{\@autore}{}
\newcommand{\@laureandoOlaureanda}{?}
\newcommand{\@dedica}{?}

\newcommand{\facolta}[1]{%
  \renewcommand{\@facolta}{#1}}
\newcommand{\dipartimento}[1]{%
  \renewcommand{\@dipartimento}{#1}}
\newcommand{\corsodilaurea}[1]{%
  \renewcommand{\@corsodilaurea}{#1}%
  \renewcommand{\@triennaleOspecialistica}{\ignorespaces}}
\newcommand{\corsodilaureatriennalein}[1]{%
  \renewcommand{\@corsodilaurea}{#1}%
  \renewcommand{\@triennaleOspecialisticaOmagistrale}{Triennale }}
\newcommand{\corsodilaureaspecialisticain}[1]{%
  \renewcommand{\@corsodilaurea}{#1}%
  \renewcommand{\@triennaleOspecialisticaOmagistrale}{Specialistica }}
\newcommand{\corsodilaureamagistralein}[1]{%
  \renewcommand{\@corsodilaurea}{#1}%
  \renewcommand{\@triennaleOspecialisticaOmagistrale}{Magistrale }}
\newcommand{\titolo}[1]{%
  \renewcommand{\@titolo}{\uppercase{#1}}}
\newcommand{\sottotitolo}[1]{%
  \renewcommand{\@sottotitolo}{\uppercase{#1}}}
\newcommand{\annoaccademico}[1]{%
  \renewcommand{\@annoaccademico}{#1}}
\newcommand{\relatore}[2][Prof.]{%
  \renewcommand{\@relatore}{#1 \uppercase{#2}}}
\newcommand{\correlatore}[2][Prof.]{%
  \renewcommand{\@correlatore}{#1 \uppercase{#2}}}
\newcommand{\correlatoreDue}[2][Prof.]{%
  \renewcommand{\@correlatoreDue}{#1 \uppercase{#2}}}
\newcommand{\laureando}[1]{%
  \renewcommand{\@laureando}{\uppercase{#1}}%
  \renewcommand{\@autore}{\uppercase{#1}}%
  \renewcommand{\@laureandoOlaureanda}{Laureando}}
\newcommand{\laureanda}[1]{%
  \renewcommand{\@laureanda}{\uppercase{#1}}%
  \renewcommand{\@autore}{\uppercase{#1}}%
  \renewcommand{\@laureandoOlaureanda}{Laureanda}}
\newcommand{\dedica}[1]{%
  \renewcommand{\@dedica}{#1}}
\newcommand{\data}[1]{\date{#1}}

\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}%
  \cleardoublepage}}

\renewcommand\maketitle{\begin{titlepage}
  \begin{sffamily}
  \begin{large}
  \begin{center}
    \vbox to0pt{%
    \vbox to\textheight{\vfil
    \includegraphics[width=\textwidth]{uniud_lite}%
    \vfil}\vss}
  \end{center}
  \begin{center}
  \begin{Large}
    \uppercase{Universit\`a degli Studi di Udine}
    \end{Large}\\
  \rule{9cm}{.4pt}\\
  \smallskip
  \ifthenelse{\equal{\@facolta}{?}}{Dipartimento di 
     \@dipartimento}{Facolt\`a di \@facolta}\\
  \medskip
  Corso di Laurea \@triennaleOspecialisticaOmagistrale in
     \@corsodilaurea\\
  \bigskip\vfill
  \begin{Large} Tesi di Laurea\end{Large}\\
  \bigskip
  \bigskip
  {\vfil
    \begin{Huge}
      {\renewcommand{\\}{\cr}
     \halign{\hbox to\textwidth{\strut\hfil##\hfil}\cr
     \@titolo\cr}}
    \end{Huge}%
    \begin{LARGE}
      {\renewcommand{\\}{\cr}
      \ifthenelse{\equal{\@sottotitolo}{?}}{}%
     {\bigskip
     \halign{\hbox to\textwidth{\strut\hfil##\hfil}\cr
     \@sottotitolo\cr}}}
    \end{LARGE}}
  \bigskip\vfill
  \begin{tabular*}{\textwidth}{@{}l@{\extracolsep{\fill}}l@{}}
    Relatore:&\@laureandoOlaureanda:\\
     \vtop{\halign{\strut\hfil##\hfil\cr
       \@relatore\cr}}&%
     \vtop{\halign{\strut\hfil##\hfil\cr
       \@autore\cr}}%
  \end{tabular*}\end{center}
  \ifthenelse{\equal{\@correlatore}{?}}{}%
    {\noindent \ifthenelse{\equal{\@correlatoreDue}{?}}%
           {Correlatore}{Correlatori}:\newline
      \vtop{\halign{\strut##\hfil\cr
        \@correlatore%\cr%
      \ifthenelse{\equal{\@correlatoreDue}{?}}%
        {\cr}{\cr\@correlatoreDue\cr}}}}%
  \begin{center}
  \vfill
  \rule{9cm}{.4pt}\\
  \medskip
  \uppercase{Anno Accademico \@annoaccademico}\\
  \end{center}
  \end{large}
\end{sffamily}
\clearemptydoublepage
\ifthenelse{\equal{\@dedica}{?}}{}{%
\pagestyle{empty}
  \null\vfil
  \begin{Large}
  \begin{flushright}
    \@dedica
  \end{flushright}
  \end{Large}
  \vfil\vfil\clearemptydoublepage}
\end{titlepage}}

\endinput